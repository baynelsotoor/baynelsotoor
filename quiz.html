<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اختبار: هل أنت قارئ حقيقي؟ - بين السطور</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #fff;
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background-color: #d4b483;
      padding: 15px;
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
    }
    .timer {
      font-size: 1.2rem;
      margin: 15px 0;
      color: #b33a3a;
      font-weight: bold;
    }
    .quiz-container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      text-align: right;
    }
    .question {
      background: #f8f4ec;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      font-weight: bold;
    }
    .answers label {
      display: block;
      padding: 5px;
      cursor: pointer;
    }
    button {
      background-color: #d4b483;
      border: none;
      padding: 12px 20px;
      font-size: 1rem;
      font-weight: bold;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #b6936f;
    }
    .result {
      background: #f0ead6;
      padding: 20px;
      margin-top: 20px;
      border-radius: 8px;
      font-size: 1.2rem;
      display: none;
    }
    .shop-btn {
      display: inline-block;
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      margin-top: 15px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
    }
    .shop-btn:hover {
      background-color: #3d8b40;
    }
  </style>
</head>
<body>

<header>اختبار: هل أنت قارئ حقيقي؟ 📚</header>

<div class="timer">الوقت المتبقي: <span id="time">60</span> ثانية</div>

<div class="quiz-container" id="quiz"></div>

<button onclick="submitQuiz()">إظهار النتيجة</button>

<div class="result" id="result"></div>

<script>
// بنك الأسئلة
const allQuestions = [
  { q: "من مؤلف كتاب 'السر'؟", options: ["روندا بايرن", "باولو كويلو", "أحلام مستغانمي"], answer: 0 },
  { q: "رواية 'هيبتا' كتبها؟", options: ["محمد صادق", "عمرو عبد الحميد", "أدهم الشرقاوي"], answer: 0 },
  { q: "أي من هؤلاء كتب 'حديث المساء'؟", options: ["أدهم الشرقاوي", "نجيب محفوظ", "يوسف زيدان"], answer: 0 },
  {q:"من مؤلف رواية «زقاق المدق»؟", options:["نجيب محفوظ","إحسان عبد القدوس","يوسف إدريس"], answer:0},
  {q:"رواية «هيبتا» من تأليف…", options:["أحمد مراد","محمد صادق","عمرو عبد الحميد"], answer:1},
  {q:"رواية «الفيل الأزرق» كتبها…", options:["أحمد مراد","عمرو عبد الحميد","تامر إبراهيم"], answer:0},
  {q:"«حديث الصباح» كتاب لـ…", options:["أدهم الشرقاوي","مصطفى محمود","أنيس منصور"], answer:0},
  {q:"«قواعد العشق الأربعون» تُنسب إلى…", options:["أحلام مستغانمي","إليف شافاق","رضوى عاشور"], answer:1},
  {q:"«أرض زيكولا» مؤلفها…", options:["محمد صادق","عمرو عبد الحميد","محمود علام"], answer:1},
  {q:"«واحة الغروب» من أعمال…", options:["بهاء طاهر","يوسف زيدان","علاء الأسواني"], answer:0},
  {q:"«عمارة يعقوبيان» من تأليف…", options:["علاء الأسواني","إبراهيم عيسى","أشرف العشماوي"], answer:0},
  {q:"«عزازيل» رواية لـ…", options:["يوسف زيدان","إبراهيم نصر الله","هشام الخشن"], answer:0},
  {q:"«موسم الهجرة إلى الشمال» كتبها…", options:["الطيب صالح","الهادي العيادي","بهاء طاهر"], answer:0},
  {q:"«رجال في الشمس» للكاتب…", options:["غسان كنفاني","جبران خليل جبران","نزار قباني"], answer:0},
  {q:"«ثلاثية غرناطة» من تأليف…", options:["رضوى عاشور","أحلام مستغانمي","ليلى الأطرش"], answer:0},
  {q:"«أولاد حارتنا» كتبها…", options:["نجيب محفوظ","توفيق الحكيم","يوسف السباعي"], answer:0},
  {q:"«الأسود يليق بكِ» من تأليف…", options:["أحلام مستغانمي","غادة السمان","إيمان يوسف"], answer:0},
  {q:"«يوتوبيا» كتبها…", options:["عمرو عبد الحميد","أحمد خالد توفيق","أحمد مراد"], answer:1},
  {q:"«إيكادولي» تنتمي إلى سلسلة…", options:["مملكة البلاغة","أرض السافلين","قواعد العشق الأربعون"], answer:0},
  {q:"«فردوس» رواية لـ…", options:["إبراهيم نصر الله","يوسف زيدان","أشرف العشماوي"], answer:0},
  {q:"من هو الأديب العربي الحاصل على نوبل 1988؟", options:["نجيب محفوظ","طه حسين","العقاد"], answer:0},
  {q:"«الخيميائي» مترجمة عربيًا ومؤلفها الأصلي…", options:["باولو كويلو","دان براون","أورهان باموق"], answer:0},
  {q:"«قواعد جارتين» من سلسلة…", options:["قواعد جارتين","أرض زيكولا","مملكة البلاغة"], answer:0},
  {q:"«تراب الماس» كتبها…", options:["أحمد مراد","تامر إبراهيم","محمد صادق"], answer:0},
  {q:"«هاربة إلى القاهرة» مؤلفها…", options:["هشام الخشن","أشرف العشماوي","إبراهيم عيسى"], answer:1},
  {q:"«ساق البامبو» للكاتب…", options:["سعود السنعوسي","إبراهيم نصر الله","ليلى العثمان"], answer:0},
  {q:"«على نهر بيرا» رواية لـ…", options:["يمنى العيد","هدى بركات","إبراهيم عيسى"], answer:2},
  { q: "من مؤلف رواية موسم الهجرة إلى الشمال؟", options: ["الطيب صالح", "نجيب محفوظ", "إبراهيم نصر الله"], answer: 0 },
  { q: "أي من هذه تعتبر رواية خيالية عربية حديثة؟", options: ["أرض السافلين", "Pride and Prejudice", "1984"], answer: 0 },
  { q: "من كاتب رواية ما لا نبوح به؟", options: ["خولة حمدي", "أدهم الشرقاوي", "نور عبد المجيد"], answer: 2 },
  { q: "رواية فلتغفري هي جزء ثانٍ لأي رواية؟", options: ["أحببتك أكثر مما ينبغي", "في قلبي أنثى عبرية", "أرض زيكولا"], answer: 0 },

  { q: "من هو الكاتب الحاصل على جائزة البوكر العربية عن رواية 'بريد الليل'؟", options: ["هدى بركات", "واسيني الأعرج", "رجاء عالم"], answer: 0 },
  {q:"«سأحيا لأن ثمة أناس قليلين أحب أن أبقى معهم أطول وقت ممكن» يظهر المعنى في أعمال…", options:["مصطفى محمود","أدهم الشرقاوي","أحلام مستغانمي"], answer:1},
  {q:"«يعذبوننا بنظافة ضمائرهم» يُنسب لعمل…", options:["يوتوبيا","عزازيل","رجال في الشمس"], answer:0},
  {q:"«الكتابة نوعٌ من أنواع الحنين» اقترن كثيرًا مع…", options:["رضوى عاشور","غادة السمان","ليلى العثمان"], answer:0},
  {q:"تفصيلة «الخزان» رمز الفشل في…", options:["رجال في الشمس","موسم الهجرة إلى الشمال","اللص والكلاب"], answer:0},
  {q:"«لا جدوى من الكلمات حين تعجز الأفعال» أقرب لأعمال…", options:["أحلام مستغانمي","يوسف زيدان","غادة السمان"], answer:2},
  {q:"تفصيلة «نقش التمساح» ترتبط بأثر/متحف في…", options:["واحة الغروب","عمارة يعقوبيان","ذات"], answer:0},
  {q:"«لقد كان النسيان هو الملاذ الوحيد» يتردد في…", options:["ثلاثية غرناطة","الأسود يليق بكِ","عودة الروح"], answer:1},
  {q:"«من لم يمت بالسيف مات بغيره» استدعاء تراثي وظفته أعمال…", options:["إبراهيم عيسى","يوسف إدريس","بهاء طاهر"], answer:0},
  {q:"تفصيلة «صندوق العطار» تظهر في أعمال…", options:["إبراهيم نصر الله","توفيق الحكيم","يوسف السباعي"], answer:0},
  { q: "رواية 2084 الصادرة حديثًا كتبها من؟", options: ["عمرو عبد الحميد", "واسيني الأعرج", "يوسف زيدان"], answer: 1 },
  { q: "في أي عام صدرت الطبعة الأولى من رواية فرانكشتاين في بغداد؟", options: ["2013", "2015", "2017"], answer: 0 },
];

// اختيار 10 أسئلة عشوائية
function getRandomQuestions(arr, num) {
  let shuffled = arr.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, num);
}

const questions = getRandomQuestions(allQuestions, 10);

// عرض الأسئلة
const quizContainer = document.getElementById("quiz");
questions.forEach((q, i) => {
  try {
    if (!q.q || !q.options || !Array.isArray(q.options)) throw "سؤال غير صالح";
    const questionHTML = `
      <div class="question">${i+1}. ${q.q}</div>
      <div class="answers">
        ${q.options.map((opt, idx) => `
          <label>
            <input type="radio" name="q${i}" value="${idx}"> ${opt}
          </label>
        `).join('')}
      </div>
    `;
    quizContainer.innerHTML += questionHTML;
  } catch(err) {
    console.warn("تخطي سؤال بسبب خطأ:", err, q);
  }
});
  
// المؤقت
let timeLeft = 60;
const timer = setInterval(() => {
  timeLeft--;
  document.getElementById("time").textContent = timeLeft;
  if (timeLeft <= 0) {
    clearInterval(timer);
    submitQuiz();
  }
}, 1000);

// عرض النتيجة
function submitQuiz() {
  clearInterval(timer);
  let score = 0;
  questions.forEach((q, i) => {
    const answer = document.querySelector(`input[name="q${i}"]:checked`);
    if (answer && parseInt(answer.value) === q.answer) {
      score++;
    }
  });

  let discount = score; // كل سؤال = 1%
  if (discount < 5) discount = 5;

  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "block";
  resultDiv.innerHTML = `
    🎉 تهانينا! لقد أجبت على ${score} من ${questions.length} أسئلة صحيحة.<br>
    حصلت على خصم ${discount}% بكود: <b>READER${discount}</b><br>
    ⏳ العرض ساري لمدة يوم واحد فقط!<br>
    <a class="shop-btn" href="store.html">تسوق الآن واستفد بالخصم</a>
  `;

  document.querySelector("button").disabled = true;
}
</script>

</body>
</html>
